---
import HeaderLink from './HeaderLink.astro';
import { SITE_TITLE } from '../consts';
import { Icon } from 'astro-icon';

const links = [
  {
    text: 'Articles',
    href: '/articles',
  },
  {
    text: 'Projects',
    href: '/projects',
  },
  {
    text: 'About',
    href: '/about',
  },
];

const iconLinks = [
  {
    text: 'Github',
    name: 'mdi:github-face',
    href: 'https://github.com/brian-gee',
  },
  {
    text: 'Bookshelf',
    name: 'mdi:bookshelf',
    href: '/bookshelf',
  },
];
---

<header
  class="flex justify-center w-full p-6"
  x-data="{ open: false }"
  :class="{ 'pb-64': open }">
  <div class="max-w-4xl w-full">
    <nav
      class="relative flex items-center justify-between w-full border-b-[1px] border-blue-300 pb-4 mb-10">
      <a href="/">
        {SITE_TITLE}
      </a>
      <!-- Navigation -->
      <div>
        <!-- Desktop Navigation -->
        <nav class="hidden sm:block space-x-2">
          {
            links.map((link) => (
              <HeaderLink href={link.href} target={link.target}>
                {link.text}
              </HeaderLink>
            ))
          }
          {
            iconLinks.map((link) => (
              <a href={link.href} target="_blank" rel="noopener noreferrer">
                <Icon name={link.name} class="w-6 h-6 inline" />
              </a>
            ))
          }
        </nav>
        <!-- Mobile Navigation -->
        <div>
          <Icon
            @click="open = !open"
            class="h-6 w-6 fill-current sm:hidden hover:cursor-pointer"
            x-show="!open"
            name="ic:outline-menu"
          />

          <Icon
            @click="open = !open"
            class="h-6 w-6 fill-current sm:hidden hover:cursor-pointer"
            x-show="open"
            name="ic:outline-close"
          />
          <!-- Menu -->
          <nav
            x-show="open"
            @click.away="open = false"
            class="absolute top-full left-0 w-full sm:hidden border-y-[1px] border-blue-300"
            style="z-index: 1000;">
            <div class="pt-5 pb-4 overflow-y-auto">
              <div class="px-2 space-y-1">
                {
                  links.map((link) => (
                    <HeaderLink
                      @click="open = false"
                      class="block text-center"
                      href={link.href}
                      target={link.target}>
                      {link.text}
                    </HeaderLink>
                  ))
                }
                <div class="flex justify-center pt-2 space-x-2">
                  {
                    iconLinks.map((link) => (
                      <a
                        href={link.href}
                        target="_blank"
                        rel="noopener noreferrer">
                        <Icon name={link.name} class="w-6 h-6 inline " />
                      </a>
                    ))
                  }
                </div>
              </div>
            </div>
          </nav>
        </div>
      </div>
    </nav>
  </div>
</header>
